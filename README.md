# NPM package creation, publishing and maintenance

Creation of frontend only NPM package, typescript, git and npm repository.

## Steps

1. Create a git repository (for this example: shipping-sheets), only provide the repo name and description, don't fill the readme , .gitignore and license just yet.

2. Create a local directory with the same name:

   > shipping-sheets

3. Follow the steps github provides, in this case:

   ```
   echo "# shipping-sheets" >> README.md
   git init
   git add README.md
   git commit -m "first commit"
   git branch -M main
   git remote add origin https://github.com/marijndegen/shipping-sheets.git
   git push -u origin main
   ```

4. Initialize the npm repo using yarn:

   > yarn init

   version: 0.1, entry point: dist/index.js, License: GPL-3.0, Private: false

5. Login to npm:

   > yarn login

6. Publish the empty package (version `1.0.0`):

   > yarn publish

7. Add package to git:

   > git add package.json
   >
   > git commit -m "package.json creation"
   >
   > git push

8. Install typescript:

   > yarn add --dev typescript

9. Create a directory `src`:

   > mkdir src

10. Inside `src`, create a file with the name:

    > index.ts

11. Copy the following content in the file:

    ```ts
    export const HelloWorld = (toLog: string = "Hello World!") =>
      console.log(toLog);
    ```

12. Create the typescript config:

    > tsconfig.json

    ```json
    {
      "compilerOptions": {
        "declaration": true,
        "esModuleInterop": true,
        "module": "esnext",
        "moduleResolution": "bundler",
        "noUnusedLocals": true,
        "noUnusedParameters": true,
        "outDir": "dist",
        "sourceMap": true,
        "strict": true,
        "target": "ES5",
        "typeRoots": ["node_modules/@types"]
      },
      "include": ["src/index.ts"],
      "exclude": ["./src/test/**/*", "node_modules"]
    }
    ```

13. Add the `.gitignore` file:

    > .gitignore

    ```
    # Logs
    logs
    *.log
    npm-debug.log*
    yarn-debug.log*
    yarn-error.log*
    lerna-debug.log*
    .pnpm-debug.log*

    # Diagnostic reports (https://nodejs.org/api/report.html)
    report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

    # Runtime data
    pids
    *.pid
    *.seed
    *.pid.lock

    # Directory for instrumented libs generated by jscoverage/JSCover
    lib-cov

    # Coverage directory used by tools like istanbul
    coverage
    *.lcov

    # nyc test coverage
    .nyc_output

    # Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
    .grunt

    # Bower dependency directory (https://bower.io/)
    bower_components

    # node-waf configuration
    .lock-wscript

    # Compiled binary addons (https://nodejs.org/api/addons.html)
    build/Release

    # Dependency directories
    node_modules/
    jspm_packages/

    # Snowpack dependency directory (https://snowpack.dev/)
    web_modules/

    # TypeScript cache
    *.tsbuildinfo

    # Optional npm cache directory
    .npm

    # Optional eslint cache
    .eslintcache

    # Optional stylelint cache
    .stylelintcache

    # Microbundle cache
    .rpt2_cache/
    .rts2_cache_cjs/
    .rts2_cache_es/
    .rts2_cache_umd/

    # Optional REPL history
    .node_repl_history

    # Output of 'npm pack'
    *.tgz

    # Yarn Integrity file
    .yarn-integrity

    # dotenv environment variable files
    .env
    .env.development.local
    .env.test.local
    .env.production.local
    .env.local

    # parcel-bundler cache (https://parceljs.org/)
    .cache
    .parcel-cache

    # Next.js build output
    .next
    out

    # Nuxt.js build / generate output
    .nuxt
    dist

    # Gatsby files
    .cache/
    # Comment in the public line in if your project uses Gatsby and not Next.js
    # https://nextjs.org/blog/next-9-1#public-directory-support
    # public

    # vuepress build output
    .vuepress/dist

    # vuepress v2.x temp and cache directory
    .temp
    .cache

    # Docusaurus cache and generated files
    .docusaurus

    # Serverless directories
    .serverless/

    # FuseBox cache
    .fusebox/

    # DynamoDB Local files
    .dynamodb/

    # TernJS port file
    .tern-port

    # Stores VSCode versions used for testing VSCode extensions
    .vscode-test

    # yarn v2
    .yarn/cache
    .yarn/unplugged
    .yarn/build-state.yml
    .yarn/install-state.gz
    .pnp.*
    ```

14. Add the following scripts to the `package.json`:

    > package.json

    ```
      "scripts": {
        "build": "tsc",
        "prepublish": "tsc"
      },
      "files": [
        "dist/*.js",
        "dist/*.d.ts",
        "dist/*.js.map"
      ]
    ```

15. Add everything to git:

    > git add .gitignore package.json src tsconfig.json yarn.lock
    >
    > git commit -m "Additional scaffold files"
    >
    > git push

16. Test the build:

    > yarn build

17. Publish (maybe you need to bump the version)!

    > yarn publish
